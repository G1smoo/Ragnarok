import"../chunks/DsnmJJEf.js";import{p as Bt,i as st,j as Pt,f as v,d as St,s as r,c as s,k as I,t as x,a as d,b as Dt,g as n,r as e,n as B}from"../chunks/BV3VnAY7.js";import{d as Lt,s as g}from"../chunks/CLeL-Gr1.js";import{i as k}from"../chunks/DVTYKMIZ.js";import{e as P,i as S}from"../chunks/LJCc-4DW.js";import{a as nt,e as rt}from"../chunks/tTaZ9371.js";import{r as E,s as Nt,a as Ft}from"../chunks/CsT_n9Hh.js";import{b as lt}from"../chunks/Byfe-_FW.js";import{b as qt}from"../chunks/B4OLx-bc.js";function Ht(D,l){I(l,[...n(l),{label:`Disciplin ${n(l).length+1}`,value:""}],!0)}var At=v('<span class="badge badge-warning badge-sm ml-1"> </span>'),zt=v('<div class="card bg-base-100 shadow-sm"><div class="card-body items-center py-8 text-base-content/40"><svg xmlns="http://www.w3.org/2000/svg" class="h-10 w-10 mb-2 opacity-30" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0"></path></svg> <p class="text-sm">Ingen hold her nu</p></div></div>'),Gt=(D,l,y)=>l(n(y)),Jt=v('<div class="card bg-warning/10 border border-warning/30 shadow-sm"><div class="card-body p-4"><div class="flex items-center justify-between gap-3"><div class="min-w-0"><p class="font-bold text-lg leading-tight truncate"> </p> <p class="text-sm text-base-content/50 mt-0.5"> </p></div> <button class="btn btn-success btn-lg gap-2 min-w-[100px]"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 13l4 4L19 7"></path></svg> Ud</button></div></div></div>'),Kt=v('<div class="space-y-3"></div>'),Ut=v('<div class="card bg-base-100 shadow-sm"><div class="card-body py-5 items-center text-base-content/40 text-sm">Alle hold er tjekket ind</div></div>'),Vt=v("<option> </option>"),Et=v('<div role="alert" class="alert alert-error py-2"><span class="text-sm"> </span></div>'),Qt=v('<div class="card bg-base-100 shadow-sm"><div class="card-body p-4"><form method="POST" action="?/checkIn" class="flex flex-col gap-3"><select name="team" class="select select-bordered select-lg w-full text-base" required><option>Vælg hold...</option><!></select> <!> <button class="btn btn-primary btn-lg w-full gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 16l-4-4m0 0l4-4m-4 4h14"></path></svg> Check ind</button></form></div></div>'),Rt=v('<span class="badge badge-neutral badge-sm font-mono"> </span>'),Wt=v('<li class="flex items-center justify-between px-4 py-3 gap-2"><div class="min-w-0"><span class="font-medium text-sm truncate block"> </span> <span class="text-xs text-base-content/40"> </span></div> <div class="flex items-center gap-2 shrink-0"><!> <span class="badge badge-success badge-sm">✓</span></div></li>'),Xt=v('<section><h2 class="text-sm font-semibold text-base-content/50 uppercase tracking-wide mb-3">Senest færdige</h2> <div class="card bg-base-100 shadow-sm"><div class="card-body p-0"><ul class="divide-y divide-base-200"></ul></div></div></section>'),Yt=v('<p class="text-base-content/60 mb-5 text-sm"> </p>'),Zt=v('<span class="text-xs text-base-content/40 font-mono"> </span>'),$t=v('<div class="flex items-center gap-2"><input type="text" class="input input-bordered input-sm flex-1 min-w-0" placeholder="Navn (f.eks. Opgave 1)"/> <input type="number" class="input input-bordered input-sm w-24 font-mono text-right" placeholder="0" inputmode="numeric"/> <button type="button" class="btn btn-ghost btn-sm btn-square text-error" aria-label="Fjern"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12"></path></svg></button></div>'),te=v('<div class="min-h-screen bg-base-200 flex flex-col"><div class="bg-base-100 shadow-sm sticky top-0 z-10"><div class="flex items-center gap-3 px-4 py-3"><a class="btn btn-ghost btn-sm btn-square"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path></svg></a> <div class="flex-1 min-w-0"><p class="text-xs text-base-content/50 truncate"> </p> <h1 class="text-lg font-bold leading-tight truncate"> </h1></div> <span class="flex items-center gap-1 text-xs text-success font-medium"><span class="relative flex h-2 w-2"><span class="animate-ping absolute inline-flex h-full w-full rounded-full bg-success opacity-75"></span> <span class="relative inline-flex rounded-full h-2 w-2 bg-success"></span></span> Live</span></div></div> <div class="flex-1 p-4 space-y-5 max-w-lg mx-auto w-full"><section><h2 class="text-sm font-semibold text-base-content/50 uppercase tracking-wide mb-3">Her nu <!></h2> <!></section> <section><h2 class="text-sm font-semibold text-base-content/50 uppercase tracking-wide mb-3">Check ind</h2> <!></section> <!></div></div> <dialog class="modal modal-bottom sm:modal-middle"><div class="modal-box w-full max-w-lg"><h3 class="font-bold text-lg mb-1">Check ud</h3> <!> <form method="POST" action="?/checkOut" class="space-y-4"><input type="hidden" name="checkInId"/> <div class="space-y-3"><div class="flex items-center justify-between"><span class="text-sm font-semibold">Point</span> <!></div> <!> <button type="button" class="btn btn-ghost btn-sm w-full border border-dashed border-base-content/20">+ Tilføj point</button></div> <div class="modal-action mt-4"><button type="button" class="btn btn-ghost">Annuller</button> <button type="submit" class="btn btn-success gap-2"><svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2.5" d="M5 13l4 4L19 7"></path></svg> Gem & check ud</button></div></form></div> <form method="dialog" class="modal-backdrop"><button>close</button></form></dialog>',1);function ve(D,l){Bt(l,!0);let y,M=st(null),f=st(Pt([{label:"Disciplin 1",value:""},{label:"Disciplin 2",value:""}]));function ot(t){I(M,t,!0),I(f,[{label:"Opgaven",value:""},{label:"Turnout",value:""}],!0),y?.showModal()}function it(t){n(f).length<=1||I(f,n(f).filter((a,o)=>o!==t),!0)}function dt(){return n(f).reduce((t,a)=>t+(parseFloat(a.value)||0),0)}function L(t){return t?new Date(t).toLocaleTimeString("da-DK",{hour:"2-digit",minute:"2-digit"}):""}var Q=te(),N=St(Q),F=s(N),R=s(F),W=s(R),X=r(W,2),q=s(X),vt=s(q,!0);e(q);var Y=r(q,2),ct=s(Y,!0);e(Y),e(X),B(2),e(R),e(F);var Z=r(F,2),H=s(Z),A=s(H),ut=r(s(A));{var mt=t=>{var a=At(),o=s(a,!0);e(a),x(()=>g(o,l.data.activeCheckIns.length)),d(t,a)};k(ut,t=>{l.data.activeCheckIns.length>0&&t(mt)})}e(A);var pt=r(A,2);{var bt=t=>{var a=zt();d(t,a)},ht=t=>{var a=Kt();P(a,21,()=>l.data.activeCheckIns,S,(o,i)=>{var c=Jt(),h=s(c),u=s(h),m=s(u),w=s(m),p=s(w,!0);e(w);var _=r(w,2),b=s(_);e(_),e(m);var C=r(m,2);C.__click=[Gt,ot,i],e(u),e(h),e(c),x(j=>{g(p,n(i).teamName),g(b,`Tjekket ind kl. ${j??""}`)},[()=>L(n(i).checked_in)]),d(o,c)}),e(a),d(t,a)};k(pt,t=>{l.data.activeCheckIns.length===0?t(bt):t(ht,!1)})}e(H);var z=r(H,2),_t=r(s(z),2);{var gt=t=>{var a=Ut();d(t,a)},ft=t=>{var a=Qt(),o=s(a),i=s(o),c=s(i),h=s(c);h.value=h.__value="";var u=r(h);P(u,17,()=>l.data.availableTeams,S,(p,_)=>{var b=Vt(),C=s(b,!0);e(b);var j={};x(()=>{g(C,n(_).team_name),j!==(j=n(_).id)&&(b.value=(b.__value=n(_).id)??"")}),d(p,b)}),e(c);var m=r(c,2);{var w=p=>{var _=Et(),b=s(_),C=s(b,!0);e(b),e(_),x(()=>g(C,l.form.message??"Fejl ved check-in")),d(p,_)};k(m,p=>{l.form?.error&&l.form?.action==="checkIn"&&p(w)})}B(2),e(i),nt(i,p=>rt?.(p)),e(o),e(a),d(t,a)};k(_t,t=>{l.data.availableTeams.length===0?t(gt):t(ft,!1)})}e(z);var xt=r(z,2);{var wt=t=>{var a=Xt(),o=r(s(a),2),i=s(o),c=s(i);P(c,21,()=>l.data.recentCheckOuts,S,(h,u)=>{var m=Wt(),w=s(m),p=s(w),_=s(p,!0);e(p);var b=r(p,2),C=s(b);e(b),e(w);var j=r(w,2),It=s(j);{var Tt=T=>{var O=Rt(),Ot=s(O);e(O),x(()=>g(Ot,`${n(u).total??""} pt`)),d(T,O)};k(It,T=>{n(u).total>0&&T(Tt)})}B(2),e(j),e(m),x((T,O)=>{g(_,n(u).teamName),g(C,`${T??""} → ${O??""}`)},[()=>L(n(u).checked_in),()=>L(n(u).checked_out)]),d(h,m)}),e(c),e(i),e(o),e(a),d(t,a)};k(xt,t=>{l.data.recentCheckOuts.length>0&&t(wt)})}e(Z),e(N);var G=r(N,2),$=s(G),tt=r(s($),2);{var kt=t=>{var a=Yt(),o=s(a,!0);e(a),x(()=>g(o,n(M).teamName)),d(t,a)};k(tt,t=>{n(M)&&t(kt)})}var J=r(tt,2),K=s(J);E(K);var U=r(K,2),V=s(U),yt=r(s(V),2);{var Ct=t=>{var a=Zt(),o=s(a);e(a),x(i=>g(o,`Total: ${i??""}`),[dt]),d(t,a)};k(yt,t=>{n(f).length>0&&t(Ct)})}e(V);var et=r(V,2);P(et,17,()=>n(f),S,(t,a,o)=>{var i=$t(),c=s(i);E(c);var h=r(c,2);E(h);var u=r(h,2);u.__click=()=>it(o),e(i),x(()=>u.disabled=n(f).length<=1),lt(c,()=>n(a).label,m=>n(a).label=m),lt(h,()=>n(a).value,m=>n(a).value=m),d(t,i)});var jt=r(et,2);jt.__click=[Ht,f],e(U);var at=r(U,2),Mt=s(at);Mt.__click=()=>{y?.close(),I(M,null)},B(2),e(at),e(J),nt(J,(t,a)=>rt?.(t,a),()=>({formData:t})=>(t.set("points",JSON.stringify(n(f).map(a=>({label:a.label,value:parseFloat(a.value)||0})))),async({result:a,update:o})=>{await o(),a.type==="success"&&(y?.close(),I(M,null))})),e($),B(2),e(G),qt(G,t=>y=t,()=>y),x(()=>{Nt(W,"href",`/dashboard/runs/${l.data.run.id??""}`),g(vt,l.data.run.name),g(ct,l.data.post.name),Ft(K,n(M)?.id??"")}),d(D,Q),Dt()}Lt(["click"]);export{ve as component};
